<!doctype html>

<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>AJAX</title>
    </head>

    <body>
        <h1>Learn AJAX</h1>
        <div id="output"></div>
        <button id="trigger">Get a Joke</button>
        
        <script type="text/javascript">
            let joker = document.querySelector('#trigger');
            joker.addEventListener('click', loadJoke);

            function loadJoke() {
                let url = 'https://api.chucknorris.io/jokes/random';

                fetch('https://api.chucknorris.io/jokes/random')
                    .then(resJSON)
                    .then(json => document.querySelector('#output').innerHTML = '<div><img src="'+json.icon_url+'">'+json.value+'</div>')
                    .catch(err);


                function resJSON(response) {
                    return response.json();
                }

                function err(error) {
                    console.log(error);
                }


              /*
              fetch('test.txt').then(function(response) {
                  return response.text();
              }).then(function(text) {
                  console.log(text);
              })
              */
            };
        </script>
    </body>
</html>